@*
* Copyright 2022 HM Revenue & Customs
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*@

@import play.api.libs.json.{JsArray, JsDefined, JsLookupResult, JsObject, JsUndefined, JsValue, Json, JsBoolean}

@(params: Map[String, Any])

@allItems = @{params("f2fPaymentItemsForEmailSuccessful") match {
    case items:String => Json.parse(items).as[List[JsObject]]
    case _ => List()
}}

@itemList = @{ allItems.map( item => {

        val taxType: String = (item \ "taxType").as[String]
        val amount: String = (item \ "amount").as[String]
        val transactionFee: String = (item \ "transactionFee").as[String]
        val transactionNumber = (item \ "transactionNumber").as[String]
        val applicationId = (item \ "applicationId").as[String]
        val panSequence = (item \ "panSequence").as[String]
        val merchantId = (item \ "merchantId").as[String]
        val terminalId = (item \ "terminalId").as[String]
        val cardVerificationMethod = (item \ "cardVerificationMethod").as[String]
        val authorisation = (item \ "authorisation").as[String]
        val transactionSource = (item \ "transactionSource").as[String]
        val time = (item \ "time").as[String]
        val transactionType = (item \ "transactionType").as[String]
        (taxType, amount, transactionFee, transactionNumber, applicationId, panSequence, merchantId, terminalId, cardVerificationMethod, authorisation, transactionSource, time, transactionType)
    })
}


    Dear Customer


    Your payment has been received by HMRC.

    Date
    @params("dateOfPayment")</td>

    @for((taxType, amount, transactionFee, transactionNumber, applicationId, panSequence, merchantId, terminalId, cardVerificationMethod, authorisation, transactionSource, time, transactionType) <- itemList) {
        Tax
        @taxType

        Payment reference<
        @transactionNumber
    }
    Tax Reference</th>
    @params("transactionReference")

    @for((taxType, amount, transactionFee, transactionNumber, applicationId, panSequence, merchantId, terminalId, cardVerificationMethod, authorisation, transactionSource, time, transactionType) <- itemList) {
        Amount
        @amount

        Card fee
        @transactionFee
    }

    Total paid
    Â£@params("totalAmountPaid")

    Card type
    Paid with @params("cardType")

    Card ending
    ending in @params("cardNumber")

    @for((taxType, amount, transactionFee, transactionNumber, applicationId, panSequence, merchantId, terminalId, cardVerificationMethod, authorisation, transactionSource, time, transactionType) <- itemList) {

        Application ID
        @applicationId

        PAN sequence
        @panSequence

        Merchant ID
        @merchantId</td>

        Terminal ID
        @terminalId</td>

        Card verification method
        @cardVerificationMethod

        Authorisation</th>
        @authorisation

        Transaction source
        @transactionSource
    }

    Date
    @params("dateOfPayment")

   @for((taxType, amount, transactionFee, transactionNumber, applicationId, panSequence, merchantId, terminalId, cardVerificationMethod, authorisation, transactionSource, time, transactionType) <- itemList) {
        Time
        @time

        Transaction type
        @transactionType
   }

    If you have an online tax account your payment will take 3 to 5 days to show in your account.

    Why you got this email

    You chose to receive payment confirmation by email.

    From From HM Revenue and Customs

@{uk.gov.hmrc.hmrcemailrenderer.templates.helpers.txt.template_footer()}
